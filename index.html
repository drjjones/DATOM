<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DATOM — Confidence you can defend.</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root {
    --text: #0b0f14;
    --muted: rgba(11,15,20,0.78);
    --accent: #06b6d4; 
    --accent-hover: #0891b2;
    --card: rgba(255, 255, 255, 0.74);
    --border: rgba(0, 0, 0, 0.10);
    --shadow: 0 12px 34px rgba(0, 0, 0, 0.08);
    --maxw: 1120px;
  }
  body { margin: 0; font-family: system-ui, sans-serif; background: url("./Assets/background.png") center top / cover no-repeat fixed; color: var(--text); line-height: 1.6; }
  
header { 
  display: flex; 
  justify-content: flex-end; /* This pushes the nav to the right side */
  align-items: center; 
  padding: 28px 64px; 
  position: relative;
  z-index: 10001; 
}
  nav a { margin-left: 28px; text-decoration: none; color: #000; font-weight: 500; transition: opacity 0.2s; }
  nav a:hover { opacity: 0.7; }
  
  main { max-width: var(--maxw); margin: 60px auto 120px; padding: 0 24px; text-align: center; }
  .hero-logo { width: 520px; max-width: 90%; margin-bottom: 40px; }
  h1 { font-size: 64px; letter-spacing: -0.03em; margin: 0 0 20px; line-height: 1.1; }
  .lede { font-size: 22px; max-width: 820px; margin: 0 auto 48px; color: var(--muted); font-weight: 400; }
  
  .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 80px; text-align: left; }
  .card { border-radius: 22px; background: var(--card); border: 1px solid var(--border); box-shadow: var(--shadow); padding: 32px; backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
  .card h3 { margin: 0 0 12px; font-size: 18px; }
  .card p { font-size: 15px; color: rgba(11,15,20,0.8); margin: 0; }
  
  .cta-block { margin-top: 60px; display: flex; justify-content: center; gap: 16px; }
  .btn { display: inline-block; padding: 16px 32px; border-radius: 12px; text-decoration: none; font-weight: 600; transition: all 0.2s; border: none; cursor: pointer; color: #fff; background: var(--accent); }
  .btn:hover { transform: translateY(-2px); background: var(--accent-hover); }

  /* ELMER STEWARD UI - CURRENTLY HIDDEN */
  .elmerDock { display: none !important; }

  /* RESPONSIVE DESIGN BREAKPOINTS */
  @media (max-width: 980px) {
    header { padding: 20px 32px; }
    h1 { font-size: 48px; }
    .grid-3 { grid-template-columns: 1fr; margin-top: 40px; }
    .cta-block { flex-direction: column; gap: 12px; align-items: center; }
    .btn { width: 100%; max-width: 320px; }
  }

  @media (max-width: 600px) {
    header { flex-direction: column; padding: 20px; gap: 12px; }
    nav { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
    nav a { margin: 0; font-size: 14px; }
    h1 { font-size: 36px; }
    .lede { font-size: 18px; }
  }
</style>
</head>
<body>

<header>
  <nav>
    <a href="product.html">Product</a>
    <a href="example.html">Example</a>
    <a href="research.html">Research</a>
    <a href="vision.html">Vision</a>
    <a href="try.html">Engage</a>
  </nav>
</header>

<main>
  <img src="./Assets/logo.png" class="hero-logo" alt="DATOM logo">
  <h1>Confidence you can defend.</h1>
  <p class="lede">Transform contested evidence into auditable decision levers. DATOM structures empirical claims into atomic units so reasoning remains inspectable across humans, institutions, and machines.</p>
  <div class="cta-block">
    <a href="example.html" class="btn">Explore a Live Datomer</a>
    <a href="try.html" class="btn">Schedule a Briefing</a>
  </div>

  <div class="grid-3">
    <div class="card"><h3>For Leadership</h3><p>Quantify risk and justify high-stakes deployment decisions with transparent, computable confidence scores.</p></div>
    <div class="card"><h3>For Researchers</h3><p>Manage complex evidence structures without losing provenance. Preserve disagreement as data, not noise.</p></div>
    <div class="card"><h3>For AI Builders</h3><p>Provide constrained, auditable inputs for LLMs to reduce hallucination and enable structural verification.</p></div>
  </div>
</main>

<footer>© 2026 DATOM — Scientific Trust Infrastructure.</footer>

<script type="importmap"> { "imports": { "@google/generative-ai": "https://esm.run/@google/generative-ai" } } </script>
<script type="module">
  import { GoogleGenerativeAI } from "@google/generative-ai";

  const API_KEY = "AIzaSyC0b_WHCOM6Fgx5iKuyZuDsHdmmftm6_y4"; 
  const genAI = new GoogleGenerativeAI(API_KEY);
  
  const model = genAI.getGenerativeModel({ 
    model: "gemini-1.5-flash", 
    systemInstruction: "You are Elmer, the Evidence Steward. 1. DO NOT include bracketed citations. 2. EXPLAIN FIRST: Ensure the user understands DATOM converts uncertain evidence into defensible scores. 3. CLOSURE: Offer [Engage] or [Briefing] ONLY after user signals satisfaction. 4. BREVITY: 2 sentences max." 
  });
  
  let chatHistory = [];

  const dock = document.getElementById("elmerDock");
  const toggleBtn = document.getElementById("toggleElmer");
  const log = document.getElementById("elmerLog");
  const sendBtn = document.getElementById("elmerSend");
  const input = document.getElementById("elmerInput");

  // Logic only executes if the HTML elements exist (are uncommented)
  if (dock && toggleBtn && log && sendBtn && input) {
      function toggleElmer() {
        const isMinimized = dock.classList.toggle("minimized");
        toggleBtn.textContent = isMinimized ? "+" : "—";
      }
      toggleBtn.addEventListener("click", (e) => { e.stopPropagation(); toggleElmer(); });
      dock.addEventListener("click", () => { if (dock.classList.contains("minimized")) toggleElmer(); });

      async function elmerHandle() {
        const text = input.value.trim();
        if (!text) return;

        addBubble(text, "user");
        input.value = "";
        const thinkingId = "thinking-" + Date.now();
        addBubble("Thinking...", "assistant", thinkingId);

        try {
          const chat = model.startChat({ history: chatHistory });
          const result = await chat.sendMessage(text);
          const response = await result.response;
          const rText = response.text();

          const thinkingBubble = document.getElementById(thinkingId);
          if (thinkingBubble) thinkingBubble.remove();
          
          addBubble(rText, "assistant");

          chatHistory.push({ role: "user", parts: [{ text: text }] });
          chatHistory.push({ role: "model", parts: [{ text: rText }] });

          const closureKeywords = ["thanks", "thank you", "makes sense", "clear", "helpful"];
          if (closureKeywords.some(k => text.toLowerCase().includes(k))) {
            addActionButtons();
          }
        } catch (e) {
          console.error("Gemini Error:", e);
          const thinkingBubble = document.getElementById(thinkingId);
          if (thinkingBubble) thinkingBubble.textContent = "I'm having trouble connecting. Please try again.";
        }
      }

      function addActionButtons() {
        if (document.getElementById("stewardAction")) return;
        const btnContainer = document.createElement("div");
        btnContainer.id = "stewardAction";
        btnContainer.innerHTML = `
          <div style="display:flex; flex-direction:column; gap:8px; margin-top:8px;">
            <a href="try.html" style="display:block; text-align:center; padding:10px; background:#06b6d4; color:#fff; border-radius:8px; text-decoration:none; font-size:12px; font-weight:700;">Engage with the Team</a>
          </div>`;
        log.appendChild(btnContainer);
        log.scrollTop = log.scrollHeight;
      }

      function addBubble(text, who, id = null) {
        const b = document.createElement("div");
        b.className = "bubble " + who;
        if (id) b.id = id;
        b.textContent = text;
        log.appendChild(b);
        log.scrollTop = log.scrollHeight;
      }

      sendBtn.addEventListener("click", elmerHandle);
      input.addEventListener("keydown", (e) => { if(e.key === "Enter") { e.preventDefault(); elmerHandle(); } });
  }
</script>
</body>
</html>